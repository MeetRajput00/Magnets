<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="node.css">
</head>
<body>
    <nav class="navbar">
        <a href="">
            <div class="home navDiv">
                <img height="100px" src="./images/home-button.png" alt="">
                  &nbsp; Back To The Start
            </div>
        </a>
        <div class="audioInstructions navDiv">
            Audio Instructions
            <img height="100px"  src="./images/voice-message.png" alt="">
            <button onclick="onButtonChange()">
                <img height="100px" src="./images/switch-on.png" alt="" class="switch-on-off-icon">
            </button>
        </div>
        <div class=" backgroundInstructions navDiv ">
            Background Music 
            <img height="90px" src="./images/musical-note.png" alt="">
            <button>
                <img height="100px" src="./images/switch-on.png" alt="">
            </button>
        </div>
    </nav>

    <div class="albertAndIntro">
        <img height="550px"src="./images/albert.png" alt="">
        <div class="text-container">
            <div class="intro">
                In this simulation, you will explore how a magnetic material can be made into a temporary magnet using Stroke method.
            </div>
            <div>
                <button onclick="                    
                let a = document.querySelector('.albertAndIntro');
                let b=  document.querySelector('.magnetsAndDrag');
                let c=document.querySelector('.credits')
                a.style.display= 'none';
                b.style.display= 'flex';
                c.style.display='none';
                ">
                    Start
                </button>
            </div>
        </div>
    </div>
    <div class="credits">This free simulation is conceptualised by Andrielle Lee, and developed by Meet Rajput.<br>
            Music Credit: Oleg Mazur
    </div>

    <div class="magnetsAndDrag" >
        <div>
                Appratus
                <div class="magnetsContainer">
                    <img width="350px" draggable="true" height="10%" class="items" src="./images/bar.png" id="magnetBar" alt="">
                    <div>Bar magnet</div>
                    <div style="width: 280px; height: 100px;">
                    <div draggable="true" class="ironBar"  style="cursor: move;">
                    </div>
                    </div>
                    <div>Iron Bar(Unmagnetised)</div>
                    <div style="width: 280px; height: 100px;">
                    <img width="280px" height="70px" draggable="true"  class="items" src="./images/steel.png" alt="">
                    </div>
                    <div>Steel Rod (Unmagnetised)</div>
                    <div style="width: 280px; height: 100px;" class="clipDiv">
                    <img width="180px" height="80px" draggable="true"  class="items" id="Clips" src="./images/8TEbeABzc-removebg-preview.png" alt="">
                    </div>
                    <div>Steel Clips</div>
                </div>
        </div>

        <div class="Drag">
        <div class="draggingText">
                Step:1 <br> Drag and Drop a magnetic material into the empty space shown
                
        </div>
            <div class="emptySpace">
                    
            </div>
            <div class="directionDiv" style="display: none;">
                <p>Click the correct observation.</p>
                <input type="radio" name="Direction" id="sameDirection" onchange="directionWrongAnswer()">
                <label for="sameDirection"> The ‘tiny magnets’ are pointing in the same direction.</label> <br>
                <input type="radio" name="Direction" id="differentDirection" onchange="directionRightAnswer()">
                <label for= "differentDirection">  The ‘tiny magnets’ are pointing in the different direction.</label>
            </div>
        </div>




    </div>

</body>
<script>
    let trash = false;
    let trashForClips= false;
    let emptySpace= document.querySelector('.emptySpace');
    let ironBar= document.querySelector(".ironBar");
    let clips= document.querySelector("#Clips");
    let items= document.querySelectorAll(".items");
    let arrowedBar= document.createElement('img');
    arrowedBar.src= "./images/arrowed.png";

    let clipDiv= document.querySelector(".clipDiv");
    let magnetBar= document.querySelector('#magnetBar');
    let a =false;
    var dragvalue;
    var magnetDragValue;
    

   
    ironBar.addEventListener('dragstart' , (event)=>{
            trash= true
        })
   
    emptySpace.addEventListener('dragover', (event)=>{
        event.preventDefault();
    })
    emptySpace.addEventListener('drop', (event)=>{
        if(trash)
        {
        emptySpace.appendChild(ironBar);
        trash= false;
        afterDrag();
        }
    })

    function onButtonChange(params) {
        let switchOnIcon=document.querySelector('.switch-on-off-icon')
        
            if(a)
            {
                switchOnIcon.src='./images/switch-on.png';
                a=false;
            }
            else 
            {
            switchOnIcon.src='./images/switch-off.png'
            a= true;
            }
    }

    function afterDrag(){
        let draggingText =document.querySelector('.draggingText');
        document.querySelector('.directionDiv').style.display= "block";
        
        draggingText.innerHTML="Step:2 <br>  Observe the directions of the arrows inside the unmagnetised magnetic material.<br> These arrows represent the magnetic domains or ‘tiny magnets’.";  
        emptySpace.removeChild(ironBar);
        emptySpace.appendChild(arrowedBar);
        }
    
        function directionRightAnswer(){
            let directionDiv= document.querySelector('.directionDiv');
            directionDiv.innerHTML="Good observation! When the ‘tiny magnets’ are pointing in different directions, the magnetic material is unmagnetised."
             document.querySelector('.draggingText').innerHTML="Step 3:<br>Drag some steel clips near the magnetic material.<br>Move the magnetic material close to the steel clips."


             clips.addEventListener('dragstart' , (event)=>{
                trashForClips= true
                })
              emptySpace.addEventListener('dragover', (event)=>{
                    event.preventDefault();
                })
                emptySpace.addEventListener('drop', (event)=>{
                    if(trashForClips)
                    {
                    emptySpace.appendChild(clips);
                    clips.style.position= "fixed"
                    clips.style.right= "40px"
                    trashForClips= false;
                    moveBar();
                    }
                })
                
               
        }
        function directionWrongAnswer() {
            let directionDiv= document.querySelector('.directionDiv');
            directionDiv.innerHTML='<p>Try again! Study the directions of the arrows shown</p> <input type="radio"; name="Direction" id="sameDirection" onchange="directionWrongAnswer()"><label for="sameDirection"> The ‘tiny magnets’ are pointing in the same direction.</label> <br> <input type="radio" name="Direction" id="differentDirection" onchange="directionRightAnswer()"> <label for= "differentDirection">  The ‘tiny magnets’ are pointing in the different direction.</label>';
        }
    

        function moveBar() {
            arrowedBar.draggable= false;
            arrowedBar.style.position= "absolute";
            arrowedBar.onmousedown= ()=>{
                dragvalue= arrowedBar;
                move();
                
            }
            function move(params) {
                document.onmousemove= (e)=>{
                    var x= e.pageX;
                    var y= e.pageY;
                    var p= x + "px";
                    var q= y + "px";
                    dragvalue.style.left= p;
                    dragvalue.style.top= q;
            }
            arrowedBar.onmouseup= (e)=>{
                document.onmousemove= null;
                afterMove();
            }
            }

        }


        function afterMove() {
            let directionDiv= document.querySelector('.directionDiv');
            directionDiv.innerHTML='<p>Click the correct observation.</p> <input type="radio" name="Attraction" id="Attracted" onchange="attractionWrongAnswer()"><label for="Attracted">The unmagnetised iron bar attracted some steel clips.</label> <br> <input type="radio" name="Attraction" id="notAttracted" onchange="attractionRightAnswer()"> <label for= "notAttracted">  The unmagnetised iron bar did not attract any steel clips.</label>';
        }
        function attractionRightAnswer(){
            let draggingText= document.querySelector(".draggingText");
            let directionDiv= document.querySelector('.directionDiv');
            directionDiv.innerHTML='<p>Good observation! The iron bar has not been magnetised so it cannot attract any steel clips.</p> ';

            draggingText.innerHTML="Step 4: <br>Drag the bar magnet near the iron bar. <br>Stroke the bar magnet in the same direction and observe the direction of the <br>   ‘tiny magnets’ inside the magnetic material "

            emptySpace.removeChild(clips);
            clips.style.position= "static";
            clips.style.draggable= false;
            arrowedBar.onmousedown = null;
            clipDiv.appendChild(clips);
            emptySpace.removeChild(arrowedBar);;
            let divToStoreAnimation= document.createElement('div');
            divToStoreAnimation.className= "divToStoreAnimation"
            divToStoreAnimation.style.display= "flex";
            divToStoreAnimation.style.flexDirection= "column";
            arrowedBar.style.position= "static"
                    
            let arrowAnimation= document.createElement('img');
            arrowAnimation.src ='./images/arrows.png';
            arrowAnimation.id= "arrownimation";
            arrowAnimation.draggable= false;
            
            emptySpace.appendChild(divToStoreAnimation);
            divToStoreAnimation.appendChild(arrowAnimation)
            divToStoreAnimation.appendChild(arrowedBar)
            clips.draggable= false; 
            moveMagnet();
         }

            function attractionWrongAnswer(){
                let directionDiv= document.querySelector('.directionDiv');
            directionDiv.innerHTML='<p>Try again! The iron bar is unmagnetised. Will it attract the steel clips?</p> <input type="radio" name="Attraction" id="Attracted" onchange="attractionRightAnswer()"><label for="Attracted">The unmagnetised iron bar attracted some steel clips.</label> <br> <input type="radio" name="Attraction" id="notAttracted" onchange="attractionWrongAnswer()"> <label for= "notAttracted">  The unmagnetised iron bar did not attract any steel clips.</label>';
            }
               
            
            function moveMagnet() {
            
                console.log(magnetBar);
            magnetBar.draggable= false;
           
            magnetBar.onmousedown= ()=>{
                magnetDragValue= magnetBar;
                magnetMove();
            }
            function magnetMove(params) {
                document.onmousemove= (e)=>{
                magnetBar.style.position= "absolute";
                    var x= e.pageX;
                    var y= e.pageY;
                    var p= x + "px";
                    var q= y + "px";
                    magnetDragValue.style.left= p;
                    magnetDragValue.style.top= q;
                    console.log( p, q);
            }
            magnetBar.onmouseup= (e)=>{
                document.onmousemove= null;
                
            }
            }

        }



        
</script>
</html>
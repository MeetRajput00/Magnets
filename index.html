<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="node.css">
</head>
<body>
    <nav class="navbar">
        <a href="">
            <div class="home navDiv">
                <img height="100px" src="./images/home-button.png" alt="">
                  &nbsp; Back To The Start
            </div>
        </a>
        <div class="audioInstructions navDiv">
            Audio Instructions
            <img height="100px"  src="./images/voice-message.png" alt="">
            <button onclick="onButtonChange()">
                <img height="100px" src="./images/switch-on.png" alt="" class="switch-on-off-icon">
            </button>
        </div>
        <div class=" backgroundInstructions navDiv ">
            Background Music 
            <img height="90px" src="./images/musical-note.png" alt="">
            <button>
                <img height="100px" src="./images/switch-on.png" alt="">
            </button>
        </div>
    </nav>

    <div class="albertAndIntro">
        <img height="550px"src="./images/albert.png" alt="">
        <div class="text-container">
            <div class="intro">
                In this simulation, you will explore how a magnetic material can be made into a temporary magnet using Stroke method.
            </div>
            <div>
                <button onclick="                    
                let a = document.querySelector('.albertAndIntro');
                let b=  document.querySelector('.magnetsAndDrag');
                let c=document.querySelector('.credits')
                a.style.display= 'none';
                b.style.display= 'flex';
                c.style.display='none';
                ">
                    Start
                </button>
            </div>
        </div>
    </div>
    <div class="credits">This free simulation is conceptualised by Andrielle Lee, and developed by Meet Rajput.<br>
            Music Credit: Oleg Mazur
    </div>

    <div class="magnetsAndDrag" >
        <div>
                Appratus
                <div class="magnetsContainer">
                    <div  class="barDiv">
                    <img width="350px" draggable="true"  class="items" src="./images/bar.png" id="magnetBar" alt="">
                </div>
                    <div>Bar magnet</div>
                    <div class="allBars">
                    <img draggable="true" class="ironBar"  style="cursor: move;" src="./images/Ibar.png" onmousedown="onIronBarClick()" >
                    </div>
                    <div>Iron Bar(Unmagnetised)</div>
                    <div class="allBars">
                    <img width="280px" height="50px" draggable="true"  class="items" src="./images/steel.png" alt="" id="steelRod" onmousedown="onSteelBarClick()">
                    </div>
                    <div>Steel Rod (Unmagnetised)</div>
                    <div class="clipDiv allBars">
                    <img width="180px" height="80px" draggable="true"  class="items" id="Clips" src="./images/8TEbeABzc-removebg-preview.png" alt="">
                    </div>
                    <div>Steel Clips</div>
                </div>
        </div>

        <div class="Drag">
        <div class="draggingText">
                Step:1 <br> Drag and Drop a magnetic material into the empty space shown
                
        </div>
            <div class="emptySpace">
                    
            </div>
            <div class="directionDiv" style="background-color: transparent; opacity: 0;">
                <div style="text-align: left;">Click the correct observation.</div>
                <br>
                <div style="display: flex; flex-direction: row;">
                <input type="radio" name="Direction" id="sameDirection" onchange="directionWrongAnswer()">
                <label for="sameDirection"> The ‘tiny magnets’ are pointing in the same direction.</label> 
                </div>
                <br> 
                <div style="display: flex; flex-direction: row;">
                <input type="radio" name="Direction" id="differentDirection" onchange="directionRightAnswer()">
                <label for= "differentDirection">  The ‘tiny magnets’ are pointing in the different direction.</label>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
   
    let emptySpace= document.querySelector('.emptySpace');
    let ironBar= document.querySelector(".ironBar");
    let steelBar= document.querySelector("#steelRod")
    let clips= document.querySelector("#Clips");
    let items= document.querySelectorAll(".items");
    let arrowedBar= document.createElement('img');
    arrowedBar.src= "./images/arrowed.png";
    arrowedBar.style.height="70px";
    arrowedBar.style.width= "300px"
    let arrowedSteel= document.createElement('img');
    arrowedSteel.src= "./images/steelbarArrowed.png";
    arrowedSteel.style.height="70px";
    arrowedSteel.style.width= "300px"
    let directionDiv= document.querySelector('.directionDiv');
    directionDiv.style.width= "50vw"
    directionDiv.style.height= "150px"
    let clipDiv= document.querySelector(".clipDiv");
    let magnetBar= document.querySelector("#magnetBar");
    let draggingText= document.querySelector(".draggingText");
    let a =false;
    var dragvalue, steelDragValue;
    var magnetDragValue, value, barCheck, aBardiv, clippedDiv;
    let divToStoreAnimation;
    let trash = false;
    var trashForClips;

    function onButtonChange(params) {
        let switchOnIcon=document.querySelector('.switch-on-off-icon')
        
            if(a)
            {
                switchOnIcon.src='./images/switch-on.png';
                a=false;
            }
            else 
            {
            switchOnIcon.src='./images/switch-off.png'
            a= true;
            }
    }

   function onIronBarClick(params) {
    ironBar.addEventListener('dragstart' , (event)=>{
            trash= true
        })
   
    emptySpace.addEventListener('dragover', (event)=>{
        event.preventDefault();
    })
    emptySpace.addEventListener('drop', (event)=>{
        if(trash)
        {
        emptySpace.appendChild(ironBar);
        trash= false;
        afterDrag("1");
        }
    }) 
   }
   
   function onSteelBarClick(params) {
    steelBar.addEventListener('dragstart' , (event)=>{
            trash= true
        })
   
    emptySpace.addEventListener('dragover', (event)=>{
        event.preventDefault();
    })
    emptySpace.addEventListener('drop', (event)=>{
        if(trash)
        {
        emptySpace.appendChild(steelBar);
        trash= false;
        afterDrag("2");
        }
    }) 
   }

    

    function afterDrag(bar){
        directionDiv.style.backgroundColor= "white";
        directionDiv.style.opacity= "1"
        draggingText.innerHTML="Step:2 <br>  Observe the directions of the arrows inside the unmagnetised magnetic material.<br> These arrows represent the magnetic domains or ‘tiny magnets’.";  
        if(bar==="1"){
            emptySpace.removeChild(ironBar);
             emptySpace.appendChild(arrowedBar);
             barCheck= false
             steelBar.onmousedown= null
        }
        if(bar==="2"){
            emptySpace.removeChild(steelBar);
            emptySpace.appendChild(arrowedSteel);
            barCheck= true;
            ironBar.onmousedown= null
        }
       
        }
    
        function directionRightAnswer(){
            
            directionDiv.innerHTML="Good observation! When the ‘tiny magnets’ are pointing in different directions, the magnetic material is unmagnetised."
             document.querySelector('.draggingText').innerHTML="Step 3:<br>Drag some steel clips near the magnetic material.<br>Move the magnetic material close to the steel clips."


             clips.addEventListener('dragstart' , (event)=>{
                trashForClips= true
                })
              emptySpace.addEventListener('dragover', (event)=>{
                    event.preventDefault();
                })
                emptySpace.addEventListener('drop', (event)=>{
                    if(trashForClips)
                    {
                    emptySpace.appendChild(clips);
                    clips.style.position= "absolute"
                    clips.style.right= "40px"
                    trashForClips= false;
                    moveBar();
                    }
                })
                
               
        }
        function directionWrongAnswer() {
            
            directionDiv.innerHTML='<div style="text-align: left;">Try again! Study the directions of the arrows shown.</div> <br><div style="display: flex; flex-direction: row;"><input type="radio"; name="Direction" id="sameDirection" onchange="directionWrongAnswer()"><label for="sameDirection"> The ‘tiny magnets’ are pointing in the same direction.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <br> <input type="radio" name="Direction" id="differentDirection" onchange="directionRightAnswer()"> <label for= "differentDirection">  The ‘tiny magnets’ are pointing in the different direction.</label> </div>';
        }
    

        function moveBar() {
            if(barCheck===false){
                arrowedBar.draggable= false;
            arrowedBar.style.position= "absolute";
            arrowedBar.onmousedown= ()=>{
                dragvalue= arrowedBar;
                move();
                
            }
            function move(params) {
                document.onmousemove= (e)=>{
                    var x= e.pageX;
                    var y= e.pageY;
                    var p= x + "px";
                    var q= y + "px";
                    dragvalue.style.left= p;
                    dragvalue.style.top= q;
                    
            }
            arrowedBar.onmouseup= (e)=>{
                document.onmousemove= null;
                afterMove();
            }
            }
            }
            if(barCheck){
                arrowedSteel.draggable= false;
            arrowedSteel.style.position= "absolute";
            arrowedSteel.onmousedown= ()=>{
                steelDragValue= arrowedSteel;
                move();
                
            }
            function move(params) {
                document.onmousemove= (e)=>{
                    var x= e.pageX;
                    var y= e.pageY;
                    var p= x + "px";
                    var q= y + "px";
                    steelDragValue.style.left= p;
                    steelDragValue.style.top= q;
                    
            }
            arrowedSteel.onmouseup= (e)=>{
                document.onmousemove= null;
                afterMove();
            }
            }
            }

        }


        function afterMove() {
            directionDiv.innerHTML='<div style="text-align: left;"><p>Click the correct observation.</p></div> <div style="display: flex; flex-direction: row;"> <input type="radio" name="Attraction" id="Attracted" onchange="attractionWrongAnswer()"><label for="Attracted">The unmagnetised iron bar attracted some steel clips.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <input type="radio" name="Attraction" id="notAttracted" onchange="attractionRightAnswer()"> <label for= "notAttracted">  The unmagnetised iron bar did not attract any steel clips.</label> </div>';
        }
        function attractionRightAnswer(){
            
            directionDiv.innerHTML='<p>Good observation! The iron bar has not been magnetised so it cannot attract any steel clips.</p> ';

            draggingText.innerHTML="Step 4: <br>Drag the bar magnet near the iron bar. <br>Stroke the bar magnet in the same direction and observe the direction of the <br>   ‘tiny magnets’ inside the magnetic material "

            emptySpace.removeChild(clips);
            clips.style.position= "static";
            clips.style.draggable= false;
            clipDiv.appendChild(clips);
            divToStoreAnimation= document.createElement('div');
            divToStoreAnimation.className= "divToStoreAnimation"
            divToStoreAnimation.style.display= "flex";
            divToStoreAnimation.style.flexDirection= "column";
          
                    
            let arrowAnimation= document.createElement('img');
            arrowAnimation.src ='./images/arrows.png';
            arrowAnimation.id= "arrownimation";
            
            emptySpace.appendChild(divToStoreAnimation);
            if(barCheck===false)
            {
                arrowedBar.onmousedown = null;
            emptySpace.removeChild(arrowedBar);
            arrowedBar.style.position= "static"
            divToStoreAnimation.appendChild(arrowAnimation)
            divToStoreAnimation.appendChild(arrowedBar)
            }
            else{
                arrowedSteel.onmousedown = null;
            emptySpace.removeChild(arrowedSteel);
            arrowedSteel.style.position= "static"
            divToStoreAnimation.appendChild(arrowAnimation)
            divToStoreAnimation.appendChild(arrowedSteel)
            }
            
            clips.draggable= false; 
            moveMagnet();
         }

            function attractionWrongAnswer(){
            directionDiv.innerHTML='<div style="text-align: left;">Try again! The iron bar is unmagnetised. Will it attract the steel clips?</div> <br><div style="display: flex; flex-direction: row;"><input type="radio"; name="Direction" id="sameDirection" onchange="attractionWrongAnswer()"><label for="sameDirection">The unmagnetised iron bar attracted some steel clips.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <br> <input type="radio" name="Direction" id="differentDirection" onchange="attractionRightAnswer()"> <label for= "differentDirection">The unmagnetised iron bar did not attract any steel clips.</label> </div>';
            }
               
            
            function moveMagnet() {
                directionDiv.innerHTML= ""
                directionDiv.style.backgroundColor= "transparent"
                magnetBar.style.transform= "rotate(25deg)"
            
                magnetBar.draggable= false;
           
            magnetBar.onmousedown= ()=>{
                magnetDragValue= magnetBar;
                magnetMove();
            }
            function magnetMove() {
                document.onmousemove= (e)=>{
                magnetBar.style.position= "absolute";
                    var x= e.pageX;
                    var y= e.pageY;
                    p= x + "px";
                    q= y + "px";
                    magnetDragValue.style.left= p;
                    magnetDragValue.style.top= q;
                    if(x>1200){
                        setTimeout(() => {
                            magnetMoving()
                        }, 3000);
                   
                }
            }
            document.onmouseup= (e)=>{
                document.onmousemove= null;
            }
            }
            

        }
            function magnetMoving(params) {
                
                if(barCheck===false){
                    arrowedBar.src= "./images/sameDirection.png"
                arrowedBar.style.width= "320px"
                arrowedBar.style.height= "85px"
                }
                if(barCheck===true){
                arrowedSteel.src= "./images/steelSame.png"
                arrowedSteel.style.width= "320px"
                arrowedSteel.style.height= "60px"
                }
                directionDiv.style.backgroundColor= "white"
                directionDiv.style.position= "static"
                directionDiv.style.display= "flex"
                directionDiv.innerHTML= '<div style="text-align: left;"><p>Click the correct observation.</p> </div> <br><div style="display: flex; flex-direction: row;">  <input type="radio" name="diffDirection" id="diffDirection" onchange="magnetsInDiffDirection()"><label for="diffDirection">The directions of the ‘tiny magnets’ remained unchanged.</label></div> <br><div style="display: flex; flex-direction: row;"> <br> <input type="radio" name="sameDirection" id="sameDirection" onchange="magnetsInSameDirection()"> <label for= "sameDirection"> The ‘tiny magnets’ are now pointing in the same direction.</label> </div>';
            }

            function magnetsInDiffDirection(params) {
                directionDiv.innerHTML='<div style="text-align: left;"><p>Try again! What did you notice about the movement of the ‘tiny magnets’ as the bar magnet is brought near the magnetic material?</p></div> <br><div style="display: flex; flex-direction: row;"> <input type="radio" name="diffDirection" id="diffDirection" onchange="magnetsInDiffDirection()"><label for="diffDirection">The directions of the ‘tiny magnets’ remained unchanged.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <input type="radio" name="sameDirection" id="sameDirection" onchange="magnetsInSameDirection()"> <label for= "sameDirection"> The ‘tiny magnets’ are now pointing in the same direction.</label> </div>'

            }
            function magnetsInSameDirection(params) {
                directionDiv.innerHTML='<p>Good observation! The ‘tiny magnets’ are attracted to the pole of the bar magnet. As the bar magnet moved across the magnetic material, these ‘tiny magnets’ also moved in the same direction.'
                    
                magnetBar.style.position= "static";
                magnetBar.style.draggable= false;
                magnetBar.style.transform= 'rotate(0deg)'
                let divToStoreAnimation=  document.querySelector(".divToStoreAnimation")
                emptySpace.removeChild(divToStoreAnimation);
                if(barCheck===false)
                {
                    aBardiv= document.createElement("div")
                    aBardiv.id= "aBarDiv"
                    arrowedBar.style.position= "static"
                    aBardiv.style.alignItems= "center"
                    aBardiv.appendChild(arrowedBar)
                    emptySpace.appendChild(aBardiv)
                }
                else{
                    aBardiv= document.createElement("div")
                    aBardiv.id= "aBarDiv"
                    arrowedSteel.style.position= "static"
                    aBardiv.style.alignItems= "center"
                    aBardiv.appendChild(arrowedSteel)
                    emptySpace.appendChild(aBardiv)
                }
               
             
               barDiv= document.querySelector(".barDiv");
                barDiv.appendChild(magnetBar)
                
                draggingText.innerHTML='Step 5: <br> When the ‘tiny magnets’ are pointing in the same direction, the magnetic <br> material has become a temporary magnet.  Drag and drop the steel clips <br> near the magnetised magnetic material. What will you observe?'
                clips.draggable= true;

                
                
                
                clips.addEventListener('dragstart' , (event)=>{
               

                })

                emptySpace.addEventListener('dragover', (event)=>{
                    event.preventDefault();
                })

                emptySpace.addEventListener('drop', (event)=>{
                    clippedDiv= document.createElement('div');
                
                    clippedDiv.id= "clippedDiv";
                    clips.style.position= "relative"
                    arrowedSteel.style.position= "static"
                    arrowedBar.style.position= "static"
                    aBardiv.style.alignItems= "end"
                    clippedDiv.appendChild(clips)
                    emptySpace.appendChild(clippedDiv)
                    
                    clips.onmousedown= null;
                    clips.draggable= false;
                    ironBar.draggable= false;
                    arrowedSteel.draggable= false;
                    arrowedBar.draggable= false;
                    magnetBar.onmousedown= null;
                    setTimeout(() => {
                        clippedDiv.style.justifyContent= "start"
                        setTimeout(() => {
                            afterClipStick();
                        }, 1000);
                        
                    }, 1000);
                })

            }
         
            function afterClipStick(params) {
         
                directionDiv.innerHTML= '<div style="text-align: left;"><p>Click the correct observation.</p></div> <br><div style="display: flex; flex-direction: row;"> <input type="radio" name="stickornot" id="sticked" onchange="sticked()"><label for="sticked">The magnetised iron bar attracted some steel clips.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <input type="radio" name="stickornot" id="notSticked" onchange="notSticked()"> <label for= "notSticked">The magnetised iron bar did not attract any steel clips.</label> </div>'
            }
            function sticked(params) {
                    directionDiv.innerHTML= "Well done! The magnetised iron bar is a temporary magnet so it can attract steel clips!"
                    setTimeout(() => {
                        emptySpace.removeChild(clippedDiv)
                        clipDiv.appendChild(clips)
                        aBardiv.style.alignItems= "center"
                    }, 1000);
                }
                function notSticked(params) {
                    directionDiv.innerHTML= '<div style="text-align: left;"><p>Try again! The iron bar is now a temporary magnet. Will it attract the steel clips?</p></div> <br><div style="display: flex; flex-direction: row;"> <input type="radio" name="diffDirection" id="diffDirection" onchange="sticked()"><label for="diffDirection">The magnetised iron bar attracted some steel clips.</label> </div> <br> <div style="display: flex; flex-direction: row;"> <input type="radio" name="sameDirection" id="sameDirection" onchange="notSticked()"> <label for= "sameDirection">The magnetised iron bar did not attract any steel clips.</label> </div>'
                }


        
</script>
</html>